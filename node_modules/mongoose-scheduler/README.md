# mongoose-scheduler
 This Plugin helps to run a hook or a function on or after the interval period 


#Installation
```bash
//from npm registry
npm install mongoose-scheduler --save

// from git repository
git clone https://github.com/kundu/mongoose-scheduler.git

```

#How to use
```bash
var mongoose = require('mongoose');
var mongooseScheduler = require('mongoose-scheduler');
var yourSchema = new mongoose.Schema({
    name: {
      type: String,
      required: true
    },
    archievedDate: Date,
  });
  placeSchema.plugin(mongooseScheduler, {
    field: 'archievedDate', 
    interval: '1s',
    keys: 'name archievedDate', 
    hook: 'remove', 
    callback: function(doc){
   		
    }, 
  });
```

#How to configure the plugin

 * field: 
 	* this field needs to be passed otherwise it generates 'Please pass the field to run the scheduler' Error
 	* the type of the field must be Date otherwise it generates 'Please pass the field of Date type' Error
 	* you can change the value of this field at any time
 * interval: 
 	* this field is optional
 	* this field determines how often the scheduler run
 	* default value is 1d
 	* mongoose-scheduler option supports the [ms](https://www.npmjs.com/package/ms) module - we can specify intervals with friendlier syntax.
 	* if scheduler gets invalid value in interval then throws 'Please pass the proper interval value' Error
	```
	 value     milliseconds
	========================
	 '2d'      172800000
	 '1.5h'    5400000
	 '1h'      3600000
	 '1m'      60000
	 '5s'      5000
	 '500ms'   500
	 100       100
	```
 * keys:
 	* this field is optional
 	* this field determines which key(s) it should return 
 	* default value is ''
 * hook:
 	* this field is optional
 	* this field determines whether you want to run hook and which hook
 	* default value is null
 	* possible values are save and remove - otherwise generates 'Please pass the proper hook value' Error
 * callback: 
 	* this field is optional
 	* if you want to run a function pass the function as an argument, first argument of the function is the object that is found from the database
 	* default value is null
 	* must be function type otherwise it throws 'Please pass a function as an callback' Error


> Note - if you do not pass any option object it will never run the scheduler function
